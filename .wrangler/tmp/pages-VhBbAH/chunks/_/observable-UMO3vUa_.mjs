const e={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,PAYMENT_REQUIRED:-32002,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,PRECONDITION_REQUIRED:-32028,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},r={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32002]:"PAYMENT_REQUIRED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32028]:"PRECONDITION_REQUIRED",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"};function mergeWithoutOverrides(e,...r){const t=Object.assign(Object.create(null),e);for(const e of r)for(const r in e){if(r in t&&t[r]!==e[r])throw new Error(`Duplicate key ${r}`);t[r]=e[r]}return t}function isObject(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function isFunction(e){return"function"==typeof e}function omitPrototype(e){return Object.assign(Object.create(null),e)}const t="function"==typeof Symbol&&!!Symbol.asyncIterator;function isAsyncIterable(e){return t&&isObject(e)&&Symbol.asyncIterator in e}const run=e=>e();function identity(e){return e}var o=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,__commonJS=(e,r)=>function(){return r||(0,e[a(e)[0]])((r={exports:{}}).exports,r),r.exports},__toESM=(e,r,t)=>(t=null!=e?o(u(e)):{},((e,r,t,o)=>{if(r&&"object"==typeof r||"function"==typeof r)for(var u,i=a(r),l=0,f=i.length;l<f;l++)u=i[l],c.call(e,u)||u===t||n(e,u,{get:(e=>r[e]).bind(null,u),enumerable:!(o=s(r,u))||o.enumerable});return e})(n(t,"default",{value:e,enumerable:!0}),e));const noop=()=>{},freezeIfAvailable=e=>{Object.freeze&&Object.freeze(e)};function createInnerProxy(e,r,t){var o;const n=r.join(".");return null!==(o=t[n])&&void 0!==o||(t[n]=new Proxy(noop,{get(o,n){if("string"==typeof n&&"then"!==n)return createInnerProxy(e,[...r,n],t)},apply(t,o,n){const s=r[r.length-1];let a={args:n,path:r};return"call"===s?a={args:n.length>=2?[n[1]]:[],path:r.slice(0,-1)}:"apply"===s&&(a={args:n.length>=2?n[1]:[],path:r.slice(0,-1)}),freezeIfAvailable(a.args),freezeIfAvailable(a.path),e(a)}})),t[n]}const createRecursiveProxy=e=>createInnerProxy(e,[],Object.create(null)),createFlatProxy=e=>new Proxy(noop,{get(r,t){if("then"!==t)return e(t)}}),i={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function getStatusCodeFromKey(e){var r;return null!==(r=i[e])&&void 0!==r?r:500}function getHTTPStatusCode(e){const t=Array.isArray(e)?e:[e],o=new Set(t.map(e=>{if("error"in e&&isObject(e.error.data)){var t;if("number"==typeof(null===(t=e.error.data)||void 0===t?void 0:t.httpStatus))return e.error.data.httpStatus;return getStatusCodeFromKey(r[e.error.code])}return 200}));if(1!==o.size)return 207;return o.values().next().value}function getHTTPStatusCodeFromError(e){return getStatusCodeFromKey(e.code)}var l=__commonJS({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(e,r){function _typeof$2(e){return r.exports=_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r.exports.__esModule=!0,r.exports.default=r.exports,_typeof$2(e)}r.exports=_typeof$2,r.exports.__esModule=!0,r.exports.default=r.exports}}),f=__commonJS({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(e,r){var t=l().default;r.exports=function(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},r.exports.__esModule=!0,r.exports.default=r.exports}}),d=__commonJS({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(e,r){var t=l().default,o=f();r.exports=function(e){var r=o(e,"string");return"symbol"==t(r)?r:r+""},r.exports.__esModule=!0,r.exports.default=r.exports}}),p=__commonJS({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(e,r){var t=d();r.exports=function(e,r,o){return(r=t(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e},r.exports.__esModule=!0,r.exports.default=r.exports}}),E=__commonJS({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(e,r){var t=p();function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}r.exports=function(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(o),!0).forEach(function(r){t(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e},r.exports.__esModule=!0,r.exports.default=r.exports}}),y=__toESM(E());function getErrorShape(r){const{path:t,error:o,config:n}=r,{code:s}=r.error,a={message:o.message,code:e[s],data:{code:s,httpStatus:getHTTPStatusCodeFromError(o)}};return n.isDev&&"string"==typeof r.error.stack&&(a.data.stack=r.error.stack),"string"==typeof t&&(a.data.path=t),n.errorFormatter((0,y.default)((0,y.default)({},r),{},{shape:a}))}const defaultFormatter=({shape:e})=>e;var O=__toESM(p()),_=class extends Error{};function getTRPCErrorFromUnknown(e){if(e instanceof b)return e;if(e instanceof Error&&"TRPCError"===e.name)return e;const r=new b({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(r.stack=e.stack),r}var b=class extends Error{constructor(e){var r,t,o;const n=function(e){if(e instanceof Error)return e;const r=typeof e;return"undefined"!==r&&"function"!==r&&null!==e?"object"!==r?new Error(String(e)):isObject(e)?Object.assign(new _,e):void 0:void 0}(e.cause);super(null!==(r=null!==(t=e.message)&&void 0!==t?t:null==n?void 0:n.message)&&void 0!==r?r:e.code,{cause:n}),(0,O.default)(this,"cause",void 0),(0,O.default)(this,"code",void 0),this.code=e.code,this.name="TRPCError",null!==(o=this.cause)&&void 0!==o||(this.cause=n)}},m=__toESM(E());function getDataTransformer(e){return"input"in e?e:{input:e,output:e}}const R={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function transformTRPCResponseItem(e,r){return"error"in r?(0,m.default)((0,m.default)({},r),{},{error:e.transformer.output.serialize(r.error)}):"data"in r.result?(0,m.default)((0,m.default)({},r),{},{result:(0,m.default)((0,m.default)({},r.result),{},{data:e.transformer.output.serialize(r.result.data)})}):r}function transformTRPCResponse(e,r){return Array.isArray(r)?r.map(r=>transformTRPCResponseItem(e,r)):transformTRPCResponseItem(e,r)}var T=class extends Error{constructor(){super("Unable to transform response from server")}};function transformResult(e,r){let t;try{t=function(e,r){if("error"in e){const t=r.deserialize(e.error);return{ok:!1,error:(0,m.default)((0,m.default)({},e),{},{error:t})}}return{ok:!0,result:(0,m.default)((0,m.default)({},e.result),(!e.result.type||"data"===e.result.type)&&{type:"data",data:r.deserialize(e.result.data)})}}(e,r)}catch(e){throw new T}if(!(t.ok||isObject(t.error.error)&&"number"==typeof t.error.error.code))throw new T;if(t.ok&&!isObject(t.result))throw new T;return t}var v=__toESM(E());function once(e){const r=Symbol();let t=r;return()=>(t===r&&(t=e()),t)}function isLazy(e){return"function"==typeof e&&"lazyMarker"in e}function isRouter(e){return isObject(e)&&isObject(e._def)&&"router"in e._def}const g={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:defaultFormatter,transformer:R},P=["then","call","apply"];function createRouterFactory(e){return function(r){const t=new Set(Object.keys(r).filter(e=>P.includes(e)));if(t.size>0)throw new Error("Reserved words used in `router({})` call: "+Array.from(t).join(", "));const o=omitPrototype({}),n=omitPrototype({});function createLazyLoader(e){return{ref:e.ref,load:once(async()=>{const r=await e.ref(),t=[...e.path,e.key],o=t.join(".");e.aggregate[e.key]=step(r._def.record,t),delete n[o];for(const[o,s]of Object.entries(r._def.lazy)){const r=[...t,o].join(".");n[r]=createLazyLoader({ref:s.ref,path:t,key:o,aggregate:e.aggregate[e.key]})}})}}function step(e,r=[]){const t=omitPrototype({});for(const[s,a]of Object.entries(null!=e?e:{})){if(isLazy(a)){n[[...r,s].join(".")]=createLazyLoader({path:r,ref:a,key:s,aggregate:t});continue}if(isRouter(a)){t[s]=step(a._def.record,[...r,s]);continue}if(!isProcedure(a)){t[s]=step(a,[...r,s]);continue}const e=[...r,s].join(".");if(o[e])throw new Error(`Duplicate key: ${e}`);o[e]=a,t[s]=a}return t}const s=step(r),a=(0,v.default)((0,v.default)({_config:e,router:!0,procedures:o,lazy:n},g),{},{record:s});return(0,v.default)((0,v.default)({},s),{},{_def:a,createCaller:createCallerFactory()({_def:a})})}}function isProcedure(e){return"function"==typeof e}async function getProcedureAtPath(e,r){const{_def:t}=e;let o=t.procedures[r];for(;!o;){const e=Object.keys(t.lazy).find(e=>r.startsWith(e));if(!e)return null;const n=t.lazy[e];await n.load(),o=t.procedures[r]}return o}function createCallerFactory(){return function(e){const{_def:r}=e;return function(t,o){return createRecursiveProxy(async n=>{const{path:s,args:a}=n,u=s.join(".");if(1===s.length&&"_def"===s[0])return r;const c=await getProcedureAtPath(e,u);let i;try{if(!c)throw new b({code:"NOT_FOUND",message:`No procedure found on path "${s}"`});return i=isFunction(t)?await Promise.resolve(t()):t,await c({path:u,getRawInput:async()=>a[0],ctx:i,type:c._def.type,signal:null==o?void 0:o.signal})}catch(e){var l,f;throw null==o||null===(l=o.onError)||void 0===l||l.call(o,{ctx:i,error:getTRPCErrorFromUnknown(e),input:a[0],path:u,type:null!==(f=null==c?void 0:c._def.type)&&void 0!==f?f:"unknown"}),e}})}}}function mergeRouters(...e){var r;const t=mergeWithoutOverrides({},...e.map(e=>e._def.record));return createRouterFactory({errorFormatter:e.reduce((e,r)=>{if(r._def._config.errorFormatter&&r._def._config.errorFormatter!==defaultFormatter){if(e!==defaultFormatter&&e!==r._def._config.errorFormatter)throw new Error("You seem to have several error formatters");return r._def._config.errorFormatter}return e},defaultFormatter),transformer:e.reduce((e,r)=>{if(r._def._config.transformer&&r._def._config.transformer!==R){if(e!==R&&e!==r._def._config.transformer)throw new Error("You seem to have several transformers");return r._def._config.transformer}return e},R),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:null===(r=e[0])||void 0===r?void 0:r._def._config.$types})(t)}const S=Symbol();function isTrackedEnvelope(e){return Array.isArray(e)&&e[2]===S}function isObservable(e){return"object"==typeof e&&null!==e&&"subscribe"in e}function observable(e){const r={subscribe(r){let t=null,o=!1,n=!1,s=!1;function unsubscribe(){null!==t?n||(n=!0,"function"==typeof t?t():t&&t.unsubscribe()):s=!0}return t=e({next(e){var t;o||null===(t=r.next)||void 0===t||t.call(r,e)},error(e){var t;o||(o=!0,null===(t=r.error)||void 0===t||t.call(r,e),unsubscribe())},complete(){var e;o||(o=!0,null===(e=r.complete)||void 0===e||e.call(r),unsubscribe())}}),s&&unsubscribe(),{unsubscribe:unsubscribe}},pipe:(...e)=>e.reduce(pipeReducer,r)};return r}function pipeReducer(e,r){return r(e)}function observableToPromise(e){const r=new AbortController;return new Promise((t,o)=>{let n=!1;function onDone(){n||(n=!0,s.unsubscribe())}r.signal.addEventListener("abort",()=>{o(r.signal.reason)});const s=e.subscribe({next(e){n=!0,t(e),onDone()},error(e){o(e)},complete(){r.abort(),onDone()}})})}function observableToAsyncIterable(e,r){const t=function(e,r){let t=null;const onAbort=()=>{null==t||t.unsubscribe(),t=null,r.removeEventListener("abort",onAbort)};return new ReadableStream({start(o){t=e.subscribe({next(e){o.enqueue({ok:!0,value:e})},error(e){o.enqueue({ok:!1,error:e}),o.close()},complete(){o.close()}}),r.aborted?onAbort():r.addEventListener("abort",onAbort,{once:!0})},cancel(){onAbort()}})}(e,r),o=t.getReader(),n={async next(){const e=await o.read();if(e.done)return{value:void 0,done:!0};const{value:r}=e;if(!r.ok)throw r.error;return{value:r.value,done:!1}},return:async()=>(await o.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>n}}export{createRecursiveProxy as A,createFlatProxy as B,b as T,__toESM as _,isAsyncIterable as a,getErrorShape as b,identity as c,E as d,getHTTPStatusCode as e,isObject as f,getTRPCErrorFromUnknown as g,__commonJS as h,isObservable as i,isFunction as j,getProcedureAtPath as k,isTrackedEnvelope as l,p as m,defaultFormatter as n,observableToAsyncIterable as o,getDataTransformer as p,R as q,run as r,createCallerFactory as s,transformTRPCResponse as t,mergeRouters as u,createRouterFactory as v,mergeWithoutOverrides as w,observable as x,transformResult as y,observableToPromise as z};
//# sourceMappingURL=observable-UMO3vUa_.mjs.map
